</html>
<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Trending YouTube</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Sharp:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="stylesheet" href="style.css">

</head>

<body>

    <aside>
        <div class="logo">
            <h2>T<span class="accent">YouTube</span></h2>
        </div>
        <nav>
            <div class="sidebar-item active" data-section="dashboard">
                <span class="material-symbols-sharp">grid_view</span>
                <h3>Dashboard</h3>
            </div>
            <div class="sidebar-item" data-section="about">
                <span class="material-symbols-sharp">info</span>
                <h3>Acerca de</h3>
            </div>
            <div class="sidebar-item" data-section="database">
                <span class="material-symbols-sharp">database</span>
                <h3>Data Base</h3>
            </div>
            <div class="sidebar-item" data-section="analytics">
                <span class="material-symbols-sharp">insights</span>
                <h3>Analytics</h3>
            </div>
            <div class="sidebar-item" data-section="reports">
                <span class="material-symbols-sharp">description</span>
                <h3>Reportes</h3>
            </div>
            <div class="sidebar-item" data-section="logout">
                <span class="material-symbols-sharp">logout</span>
                <h3>Log Out</h3>
            </div>
        </nav>
    </aside>

    <main>
        <!-- Dashboard -->
        <div id="dashboard" class="section active">
            <h2>Bienvenido al Dashboard</h2>
            <p>Contenido principal de la sección Dashboard.</p>

            <div class="highlights">
                <div class="highlight-card yellow">
                    <div class="hc-content">
                        <span id="stat-rows" class="hc-value">--</span>
                        <span class="hc-label">Total registros</span>
                    </div>
                    <span class="material-symbols-sharp hc-icon">storage</span>
                </div>

                <div class="highlight-card blue" id="reactions-card">
                    <div class="hc-content">
                        <span id="stat-likes" class="hc-value">--</span>
                        <span class="hc-label">Likes</span>
                    </div>
                    <span id="reactions-icon" class="material-symbols-sharp hc-icon">thumb_up</span>
                </div>

                <div class="highlight-card green">
                    <div class="hc-content">
                        <span id="stat-views" class="hc-value">--</span>
                        <span class="hc-label">Vistas</span>
                    </div>
                    <span class="material-symbols-sharp hc-icon">visibility</span>
                </div>

                <div class="highlight-card pink">
                    <div class="hc-content">
                        <span id="stat-comments" class="hc-value">--</span>
                        <span class="hc-label">Comentarios</span>
                    </div>
                    <span class="material-symbols-sharp hc-icon">chat_bubble</span>
                </div>

            </div>

            <!-- Acerca de -->
            <div id="about" class="section">
                <h2>Acerca de</h2>
                <p>Información sobre la aplicación.</p>
            </div>

            <!-- Data Base -->
            <div id="database" class="section">
                <h2>Data Base</h2>
                <p>Aquí iría tu visor de CSV/JSON.</p>
            </div>

            <!-- Analytics -->
            <div id="analytics" class="section">
                <h2>Analytics</h2>
                <p>Gráficos y análisis de datos.</p>
            </div>

            <!-- Reportes -->
            <div id="reports" class="section">
                <h2>Reportes</h2>
                <p>Descarga de reportes PDF/PPT.</p>
            </div>

            <!-- Log Out -->
            <div id="logout" class="section">
                <h2>Log Out</h2>
                <p>¿Seguro que deseas cerrar sesión?</p>
            </div>
    </main>
    <!-- LIBRERÍAS Three.js al final del body -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.139.2/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.139.2/examples/js/controls/OrbitControls.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three-globe@2.27.1/dist/three-globe.min.js"></script>

    <script>
        (function () {
            const sidebarItems = document.querySelectorAll('.sidebar-item');
            const pageSections = document.querySelectorAll('.section');

            sidebarItems.forEach(item => {
                item.addEventListener('click', () => {
                    sidebarItems.forEach(i => i.classList.remove('active'));
                    pageSections.forEach(s => s.classList.remove('active'));

                    item.classList.add('active');

                    const targetId = item.getAttribute('data-section');
                    const targetSection = document.getElementById(targetId);
                    if (targetSection) targetSection.classList.add('active');
                });
            });
        })();

        (async function () {
            try {
                const resp = await fetch('../data_limpios/stats.json');
                if (!resp.ok) throw new Error(`HTTP ${resp.status}`);
                const stats = await resp.json();

                document.getElementById('stat-rows').textContent =
                    stats.total_rows.toLocaleString();

                const likesEl = document.getElementById('stat-likes');
                const iconEl = document.getElementById('reactions-icon');
                let showingLike = true;
                likesEl.textContent = stats.total_likes.toLocaleString();

                setInterval(() => {
                    if (showingLike) {
                        iconEl.textContent = 'thumb_down';
                        likesEl.textContent = stats.total_dislikes.toLocaleString();
                    } else {
                        iconEl.textContent = 'thumb_up';
                        likesEl.textContent = stats.total_likes.toLocaleString();
                    }
                    showingLike = !showingLike;
                }, 5000);

                document.getElementById('stat-views').textContent =
                    stats.total_views.toLocaleString();

                document.getElementById('stat-comments').textContent =
                    stats.total_comments.toLocaleString();

            } catch (err) {
                console.error('No se pudieron cargar las estadísticas:', err);
            }
        })();

        window.addEventListener('DOMContentLoaded', () => {
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera();
            camera.aspect = window.innerWidth / 500;
            camera.updateProjectionMatrix();
            camera.position.z = 250;

            const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, 500);
            document.getElementById('globe-container').appendChild(renderer.domElement);

            const controls = new OrbitControls(camera, renderer.domElement);
            controls.enableZoom = false;
            controls.autoRotate = true;
            controls.autoRotateSpeed = 0.3;

            // Luz
            scene.add(new THREE.AmbientLight(0xbbbbbb));
            const light = new THREE.DirectionalLight(0xffffff, 0.6);
            light.position.set(1, 1, 1);
            scene.add(light);

            // Crear el globo
            const globe = new ThreeGlobe()
                .globeImageUrl('https://unpkg.com/three-globe/example/img/earth-dark.jpg')
                .bumpImageUrl('https://unpkg.com/three-globe/example/img/earth-topology.png');

            scene.add(globe);

            // Posicionar cámara mirando a EE.UU.
            const lat = 38.8833;
            const lon = -77.0167;
            const phi = (90 - lat) * Math.PI / 180;
            const theta = (lon + 180) * Math.PI / 180;
            const radius = 150;

            const x = -radius * Math.sin(phi) * Math.cos(theta);
            const y = radius * Math.cos(phi);
            const z = radius * Math.sin(phi) * Math.sin(theta);

            camera.position.set(x, y, z);
            camera.lookAt(globe.position);

            // Animación
            const animate = () => {
                requestAnimationFrame(animate);
                controls.update();
                renderer.render(scene, camera);
            };

            animate();

            // Ajuste responsive
            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / 500;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, 500);
            });
        });
    </script>


</body>

</html>